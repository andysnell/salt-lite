---
description: 
globs: 
alwaysApply: true
---
# Salt-Lite Rules for AI Agents
0. Always run PHPUnit, PHPStan, and PHP CodeSniffer. All changes MUST pass PHPUnit, PHPStan, and PHP CodeSniffer. Running Rector and PHPCBF can help with fixing any found issues.
1. Always follow the coding style of the existing code in this project, making special note of how methods and variables are cased (e.g. snake_case vs CamelCase). Note that methods in PHPUnit unit tests are snake cased. When in doubt, follow PSR-12/PER-CS
2. If a value object exists, it can be used in place of a test mock.
3. Do not create tests for interfaces, abstract classes, or traits without being explictly told to create the test. When in doubt, ask.
4 Use these tools:
    - PHPUnit Tests Coverage: `docker compose run --rm -e XDEBUG_MODE=coverage php php vendor/bin/phpunit --coverage-html build/phpunit`
    - PHPStan: `docker compose run --rm php php vendor/bin/phpstan --verbose`
    - PHP_CodeSniffer: `docker compose run --rm php php vendor/bin/phpcs --parallel=$(nproc --ignore=2)`
    - PHPCBF: `docker compose run --rm php php vendor/bin/phpcbf --parallel=$(nproc --ignore=2)`
    - Rector: `docker compose run --rm php php vendor/bin/rector`
    - PHP: `docker compose run --rm php php`

